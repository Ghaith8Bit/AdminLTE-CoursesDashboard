(function () {
    const form = document.querySelector('#coursesFilterForm');
    const submitBtn = form.querySelector('button[type="submit"]');
    const resetBtn = form.querySelector('button[type="reset"]');

    submitBtn.addEventListener('click', (event) => {
        event.preventDefault();

        const nameValue = form.querySelector('#nameFilter').value;
        const priceOperator = form.querySelector('#priceFilter').value;
        const priceValue = form.querySelector('#priceFilterValue').value;
        const startDateOperator = form.querySelector('#startDateFilterOperator').value;
        const startDateValue = form.querySelector('#startDateFilterValue').value;
        const endDateOperator = form.querySelector('#endDateFilterOperator').value;
        const endDateValue = form.querySelector('#endDateFilterValue').value;

        let queryString = '';

        if (nameValue) {
            queryString += `name[like]=${nameValue}&`;
        }
        if (priceValue) {
            queryString += `price[${priceOperator}]=${priceValue}&`;
        }
        if (startDateValue) {
            queryString += `start_date[${startDateOperator}]=${startDateValue}&`;
        }
        if (endDateValue) {
            queryString += `end_date[${endDateOperator}]=${endDateValue}&`;
        }

        // Remove the trailing '&' if there is one
        if (queryString.endsWith('&')) {
            queryString = queryString.slice(0, -1);
        }

        window.location.href = `http://localhost:8000/dashboard/courses?${queryString}`;
    });

    resetBtn.addEventListener('click', () => {
        // Clear the form fields
        form.querySelector('#nameFilter').value = '';
        form.querySelector('#priceFilter').value = '';
        form.querySelector('#priceFilterValue').value = '';
        form.querySelector('#startDateFilterOperator').value = '';
        form.querySelector('#startDateFilterValue').value = '';
        form.querySelector('#endDateFilterOperator').value = '';
        form.querySelector('#endDateFilterValue').value = '';
    });
})();
